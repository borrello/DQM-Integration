process DTDQM = {
    
    #----------------------------
    #### Event Source
    #-----------------------------
    include "DQM/Integration/test/inputsource.cfi"
    replace EventStreamHttpReader.consumerName = "DT DQM Consumer"

    #----------------------------
    #### DQM Environment
    #-----------------------------
    include "DQMServices/Core/data/DQM.cfg"
    //replace DQMStore.referenceFileName = "DT_reference.root"

    include "DQMServices/Components/data/DQMEnvironment.cfi"

    #----------------------------
    #### DQM Live Environment
    #-----------------------------
    include "DQM/Integration/test/environment.cfi"
    replace dqmEnv.subSystemFolder    = "DT"
    #-----------------------------
    
    include "EventFilter/DTTFRawToDigi/data/dttfunpacker.cfi"
    replace DTLinearDriftAlgo_CosmicData.recAlgoConfig.tTrigModeConfig.kFactor = -0.7
        
    include "DQM/Integration/test/dtReco.cff"
    
    service = MessageLogger {
	untracked vstring destinations = { "cout" }
	untracked PSet cout             = { untracked string threshold = "WARNING" }	
    }
    
    
    # Data integrity
    include "DQM/DTMonitorModule/data/dtDataIntegrityTask.cfi"
    include "DQM/DTMonitorClient/data/dtDataIntegrityTest.cfi"
    
    # Digi task
    include "DQM/DTMonitorModule/data/dtDigiTask.cfi"    
    include "DQM/DTMonitorClient/data/dtOccupancyTest.cfi"
    replace dtDigiMonitor.readDB = false 

    # Local Trigger task
    include "DQM/DTMonitorModule/data/dtTriggerTask.cfi"
    include "DQM/DTMonitorClient/data/dtLocalTriggerTest.cfi"
    replace dtTriggerMonitor.process_dcc = true
    replace dtTriggerMonitor.dcc_label="dttfunpacker" 

     # segment reco task
    include "DQM/DTMonitorModule/data/dtSegmentTask.cfi"
    include "DQM/DTMonitorClient/data/dtSegmentAnalysisTest.cfi"

    # resolution task
    include "DQM/DTMonitorModule/data/dtResolutionTask.cfi"

    # noise task
    include "DQM/DTMonitorModule/data/dtNoiseTask.cfi"
    include "DQM/DTMonitorClient/data/dtNoiseAnalysis.cfi"
    
    # report summary
    include "DQM/DTMonitorClient/data/dtSummaryClients.cfi"
     
    module dtqTester = QualityTester {
	untracked FileInPath qtList = "DQM/DTMonitorClient/test/QualityTests.xml"
	untracked int32 prescaleFactor = 1
    }
    
   

    sequence dqmmodules     = {dqmEnv & dqmSaver}

    sequence reco = {dtunpacker & dttfunpacker & dt1DRecHits & dt4DSegments}

    sequence dtDQMTask      = { dtDigiMonitor & dtSegmentAnalysisMonitor & dtTriggerMonitor &
	dtNoiseMonitor & dtResolutionAnalysisMonitor}

    sequence dtDQMTest      = { dataIntegrityTest & triggerTest & dtOccupancyTest & segmentTest
	& dtNoiseAnalysisMonitor & dtSummaryClients & dtqTester}


    
    path dtDQMPath = {dqmmodules & reco & dtDQMTask & dtDQMTest}


}
