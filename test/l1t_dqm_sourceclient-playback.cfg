process DQM={
    
    untracked PSet maxEvents = {untracked int32 input =  -1 }

    // SM Event Source
    source = EventStreamHttpReader
    {
       string sourceURL = "http://cmsmon:50082/urn:xdaq-application:lid=29"
        int32 max_event_size = 7000000
        int32 max_queue_depth = 5
        untracked string consumerName = "L1T DQM Consumer"
        untracked string consumerPriority = "normal"
        untracked int32 headerRetryInterval = 3  // seconds
        untracked double maxEventRequestRate = 12  // hertz
#        untracked PSet SelectEvents = { vstring SelectEvents={"PhysicsPath"} }
        untracked PSet SelectEvents = { vstring SelectEvents={"*"} }
    }

#######################################################################
                          ##  DQM SERVICES
#######################################################################
include "DQMServices/Core/data/DQM.cfg"
replace DQMStore.verbose = 0
replace DQM.collectorHost = "srv-c2d05-18"
#######################################################################
                          ##  DQM SOURCES
#######################################################################
include "CondCore/DBCommon/data/CondDBSetup.cfi"
include "Geometry/CSCGeometry/data/cscGeometry.cfi"
include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

    

    # output into logfiles (verbose)

include "DQM/L1TMonitor/data/L1TMonitor.cff"    
include "DQM/L1TMonitorClient/data/L1TMonitorClient.cff"    

    #########################################################
    #### BEGIN DQM Online Environment #######################
    #########################################################

    #### PUT THE FOLLOWING INTO YOUR PATH FOR OPERATION AT P5
    #### REPLACE SubsystemName by the name of your source ###

       replace dqmSaver.convention      = "Online"
       replace dqmSaver.dirName       = "/home/dqmdevlocal/output"
       replace dqmSaver.producer      = "Playback"
       # (this goes into the foldername)
       replace dqmEnv.subSystemFolder = "L1T"
       
//     replace dqmSaver.saveByLumiSection =  1
//     replace dqmSaver.saveByMinute      = -1
//     replace dqmSaver.saveByEvent       = -1
       replace dqmSaver.saveByRun         =  1
       replace dqmSaver.saveAtJobEnd      = true       # optionally change fileSaving  conditions

   
    #########################################################
    #### END ################################################
    #########################################################

### FIX YOUR  PATH TO INCLUDE dqmEnv and dqmSaver
#    path p ={dqmSource & qTester & dqmClient & dqmEnv & dqmSaver }
#     path pp ={dqmEnv & dqmSaver }

} 
