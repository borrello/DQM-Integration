process DQMOnlineSimData = {
    
    service = MessageLogger {
        untracked vstring destinations = { "cout" }
        untracked PSet cout = { untracked string threshold = "INFO" }
        untracked vstring debugModules   = { "SiStripZeroSuppression",
                                                "SiStripClusterizer",
                                                "TrackInfoProducer",
                                                "TrackRefitter"}
    }
    


    #-------------------------------------------------
    ## MAGNETIC FIELD
    #-------------------------------------------------
    ### Magnetic fiuld: force mag field to be 0.0 tesla
    include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"
 
    #-------------------------------------------------
    ## GEOMETRY
    #-------------------------------------------------
    
    # tracker geometry
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    
    # tracker numbering
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    
    # cms geometry
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    
    #-------------------------------------------------
    ## CALIBRATION
    #-------------------------------------------------
    
    include "Configuration/StandardSequences/data/FakeConditions.cff"
    
    #If Frontier is used in xdaq environment use the following service
#    service = SiteLocalConfigService {}
    
    #-----------------------
    ####  Reconstruction Modules
    #-----------------------
    
    include "Configuration/GlobalRuns/data/ReconstructionGR.cff"
    ## offline raw to digi for MC
    include "Configuration/StandardSequences/data/RawToDigi.cff"

    #--------------------------
    #### DQMServices
    #--------------------------
    
    ### DQMStore Service
    include "DQMServices/Core/data/DQM.cfg"
    replace DQMStore.referenceFileName = "/home/dqm/tracker/sistrip_reference.root"
    replace DQM.collectorHost = "srv-c2d05-18.cms"
    replace DQM.collectorPort=9090
    
    ####  DQM File Saving and Environment
    include "DQMServices/Components/data/DQMEnvironment.cfi"
    replace dqmSaver.convention       = "Online"
    replace dqmSaver.dirName          = "/tmp/trackerdqm/dqmdata"
    replace dqmSaver.producer         = "Playback"
    replace dqmEnv.subSystemFolder    = "SiStrip"

// replace dqmSaver.saveByLumiSection =  1
// replace dqmSaver.saveByMinute      = -1
// replace dqmSaver.saveByEvent       = -1
   replace dqmSaver.saveByRun         =  1
   replace dqmSaver.saveAtJobEnd      = true


   #### Quality Tester ####
   module qTester = QualityTester {
     untracked FileInPath qtList = "DQM/SiStripMonitorClient/data/sistrip_qualitytest_config.xml"
     untracked bool getQualityTestsFromFile = true	        
     untracked int32 prescaleFactor = 1
   }

    #--------------------------
    #### STRIP DQM Source and Client
    #--------------------------
    include "DQM/SiStripMonitorClient/data/SiStripSourceConfigP5.cff"
    replace SiStripMonitorTrack_cosmicTk.Mod_On = false
    replace SiStripMonitorTrack_cosmicTk.OffHisto_On = false

    # Client
    module SiStripClient = SiStripAnalyser {
    	untracked int32  StaticUpdateFrequency = -1
        untracked int32  TkMapCreationFrequency = -1
        untracked int32  SummaryCreationFrequency = 1
        PSet TkmapParameters =
        {
   	   untracked string trackerdatPath="CommonTools/TrackerMap/data/"
	   untracked string trackermaptxtPath="DQM/Integration/test/TkMap/"
	   untracked bool loadFedCabling=true
        }
    }

    #--------------------------
    #### Web Service
    #--------------------------
    service = ModuleWebRegistry { }

    #----------------------------
    #### Scheduling
    #-----------------------------

    sequence SiStripSources = {   
      HardwareMonitor,
#      SiStripMonitorDigiReal,
#      SiStripMonitorCluster,
      SiStripMonitorTrack_cosmicTk,
      MonitorTrackResiduals_cosmicTk,
      TrackMon_cosmicTk
    }

    sequence DQMCommon = {
      qTester,
      dqmEnv ,
      dqmSaver 
    }
    
    path p = {
#       siStripDigis, 
#	trackerGR,
        DQMCommon,
	SiStripSources, 
        SiStripClient
    }

    service = AdaptorConfig {}
   

    #----------------------------
    #### Event Source
    #-----------------------------

    source = EventStreamHttpReader{

        // Change the following line to use a different playback system
	// 1) CERN
        string sourceURL = "http://cmsmondev:50082/urn:xdaq-application:lid=29"
	// 2) FNAL
	#string sourceURL = "http://lhc01n02.fnal.gov:50082/urn:xdaq-application:lid=29"
	// 3) ROC
        #string sourceURL = "http://cmsroc9.fnal.gov:50082/urn:xdaq-application:lid=29"
        int32 max_event_size = 7000000
        int32 max_queue_depth = 5

        untracked string consumerName = "SiStrip DQM Consumer"
        untracked string consumerPriority = "normal"
        untracked int32 headerRetryInterval = 3  // seconds
        untracked double maxEventRequestRate = 2.5  // hertz
        untracked PSet SelectEvents = { vstring SelectEvents={"*"} }
    }

    untracked PSet maxEvents = {untracked int32 input = -1}
}
