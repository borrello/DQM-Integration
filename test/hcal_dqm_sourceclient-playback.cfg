process HCALDQM = { 
	include "DQMServices/Core/data/DQM.cfg"
	replace DQM.collectorHost = "srv-c2d05-18"

       include "DQM/HcalMonitorModule/data/HcalMonitorModule.cfi"
                replace hcalMonitor.DataFormatMonitor = true

                replace hcalMonitor.DigiMonitor      = false
                replace hcalMonitor.HotCellMonitor   = false
	        replace hcalMonitor.RecHitMonitor    = false
                replace hcalMonitor.TrigPrimMonitor  = false
                replace hcalMonitor.DeadCellMonitor  = false
		replace hcalMonitor.MTCCMonitor      = false
	        replace hcalMonitor.PedestalMonitor  = false
	        replace hcalMonitor.LEDMonitor       = false
                replace hcalMonitor.CaloTowerMonitor = false
		replace hcalMonitor.HcalAnalysis     = false

      include "DQM/HcalMonitorClient/data/HcalMonitorClient.cfi"
		replace hcalClient.plotPedRAW = true
                replace hcalClient.baseHtmlDir="" // suppresses html output from HCalClient  

                replace hcalClient.DataFormatClient = false
	    	replace hcalClient.DigiClient       = false
	    	replace hcalClient.RecHitClient     = false
       	    	replace hcalClient.DeadCellClient   = false
                replace hcalClient.TrigPrimClient   = false
    	    	replace hcalClient.HotCellClient    = false
            	replace hcalClient.CaloTowerClient  = false
	    	replace hcalClient.LEDClient        = false
        	replace hcalClient.PedestalClient   = false

	include "DQM/HcalMonitorModule/data/Hcal_FrontierConditions.cff"
	include "FWCore/MessageLogger/data/MessageLogger.cfi"

	include "EventFilter/HcalRawToDigi/data/HcalRawToDigi.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hbhe.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-ho.cfi"
        include "RecoLocalCalo/HcalRecProducers/data/HcalSimpleReconstructor-hf.cfi"
	


	path p = { hcalDigis, horeco, hfreco, hbhereco, hcalMonitor, hcalClient, dqmEnv, dqmSaver }



	untracked PSet options = {
		untracked vstring Rethrow = { "ProductNotFound", "TooManyProducts", "TooFewProducts" }
        }

	untracked PSet maxEvents = {untracked int32 input = -1 }

        source = EventStreamHttpReader {
        string sourceURL = "http://cmsmondev:50082/urn:xdaq-application:lid=29"
        //string sourceURL = "http://srv-c2c07-19.cms:11100/urn:xdaq-application:service=storagemanager"
        int32 max_event_size = 7000000
        int32 max_queue_depth = 5
        untracked string consumerName = "HCAL DQM Consumer"
        untracked string consumerPriority = "normal"
        untracked int32 headerRetryInterval = 3
        untracked double maxEventRequestRate = 10
        //untracked PSet SelectEvents = { vstring SelectEvents={"PhysicsPath"} }
        untracked PSet SelectEvents = {vstring SelectEvents={"*"} }
        }
	

	#########################################################
 	#### BEGIN DQM Online Environment #######################
	#########################################################
	# use include file for dqmEnv dqmSaver
        include "DQMServices/Components/data/DQMEnvironment.cfi"
        replace dqmSaver.convention       = "Online"
        replace dqmSaver.producer         = "Playback"
        replace dqmEnv.subSystemFolder    = "Hcal"
        replace dqmSaver.dirName          = "/cms/mon/data/dropbox"


	replace dqmSaver.saveByLumiSection =  1
	// replace dqmSaver.saveByMinute      = -1
	// replace dqmSaver.saveByEvent       = -1
	replace dqmSaver.saveByRun         =  1
	replace dqmSaver.saveAtJobEnd      = true
   
        #########################################################
        #### END ################################################
        #########################################################
}
