process DQM = {
    
    untracked PSet maxEvents = {untracked int32 input = -1}

    source = EventStreamHttpReader {
        // select the playback system
        string sourceURL = 
	// 1.cern
	"http://cmsmon:50082/urn:xdaq-application:lid=29"
	// 2.fnal
	#"http://lhc01n02.fnal.gov:50082/urn:xdaq-application:lid=29"
	// 3.roc
	#"http://cmsroc9.fnal.gov:50082/urn:xdaq-application:lid=29"
        int32 max_event_size = 7000000
        int32 max_queue_depth = 5
        untracked string consumerName = "L1 Emulator DQM Consumer"
        untracked string consumerPriority = "normal"
        untracked int32 headerRetryInterval  = 3   // seconds
        untracked double maxEventRequestRate = 2.5 // hertz
        untracked PSet SelectEvents = { vstring SelectEvents={"*"} }
    }

    service = DaqMonitorROOTBackEnd {}
    
    service = DQMShipMonitoring {
	// event-period for shipping monitoring to collector
	// untracked uint32 period = 5000  #default: 25
    }

    # include "DQMServices/Examples/test/dqm_monitorDaemon.cfi"
    service = MonitorDaemon {
        untracked bool AutoInstantiate = true
	untracked string DestinationAddress = "srv-c2d05-18"
	untracked int32 SendPort = 9090
        untracked int32 maxAttempts2Reconnect = 99999
    }

    // L1 Trigger Emulator Monitoring configuration
    include "DQM/L1TMonitor/data/L1TEmulatorMonitor.cff"    
 
    // output into logfiles (verbose)
    service = MessageLogger {
	untracked vstring destinations = { 
	    "detailedInfo" , "critical" , "cout"
	}
	untracked vstring debugModules = { "*" }
	untracked PSet critical     
	= { untracked string threshold = "ERROR"   }
	untracked PSet detailedInfo 
	= { untracked string threshold = "INFO"    } 
	untracked PSet cout = {
	    untracked string threshold = "WARNING"
	    untracked bool noLineBreaks = true
	    untracked PSet WARNING = {untracked int32 limit = 0 }
	}
    }	
    
    include "DQMServices/Components/test/dqm_onlineEnv.cfi"
    replace dqmSaver.fileName      = "L1TEMU"
    replace dqmSaver.isPlayback    = true 
    replace dqmSaver.dirName       = "/data1/dropbox"
    replace dqmEnv.subSystemFolder = "L1T"
       
    # optionally change fileSaving  conditions
    replace dqmSaver.prescaleLS    = 1

    #path p = { dqmSource & qTester & dqmClient & dqmEnv & dqmSaver }
    path p = { dqmEnv & dqmSaver }
} 
